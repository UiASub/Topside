{% extends "base.html" %}

{% block content %}
<div class="row g-4">
  <!-- Battery Card -->
  <div class="col-md-3">
    <div class="card bg-dark text-white h-100 border border-secondary">
      <div class="card-body d-flex flex-column">
        <h5 class="card-title text-info">Battery</h5>
        <!-- Example of a progress bar -->
        <div class="progress mb-2" style="height: 20px;">
          <div
            id="battery-progress"
            class="progress-bar bg-success"
            role="progressbar"
            style="width: 0%;"
            aria-valuenow="0"
            aria-valuemin="0"
            aria-valuemax="100"
          >
            0%
          </div>
        </div>
        <!-- Fallback text -->
        <p id="battery-status" class="card-text mt-auto">Loading...</p>
      </div>
    </div>
  </div>

  <!-- Depth Card -->
  <div class="col-md-3">
    <div class="card bg-dark text-white h-100 border border-secondary">
      <div class="card-body">
        <h5 class="card-title text-info">Depth</h5>
        <p id="depth-status" class="display-6">Loading...</p>
        <small class="text-muted">Target: <span id="depth-target">-</span></small>
      </div>
    </div>
  </div>

  <!-- Lights Card -->
  <div class="col-md-6">
    <div class="card bg-dark text-white h-100 border border-secondary">
      <div class="card-body">
        <h5 class="card-title text-info">Lights</h5>
        <div id="light-data" class="mt-3">Loading...</div>
      </div>
    </div>
  </div>
</div>

<div class="row g-4 mt-1">
  <!-- Thruster Status -->
  <div class="col-md-8">
    <div class="card bg-dark text-white h-100 border border-secondary">
      <div class="card-body">
        <h5 class="card-title text-info">Thruster Status</h5>
        <table
          id="thruster-status-table"
          class="table table-dark table-striped table-bordered align-middle mt-3"
        >
          <thead>
            <tr>
              <th>Thruster</th>
              <th>Power (W)</th>
              <th>Temperature (Â°C)</th>
            </tr>
          </thead>
          <tbody>
            <!-- Dynamically populated by JavaScript -->
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Sensor Data -->
  <div class="col-md-4">
    <div class="card bg-dark text-white h-100 border border-secondary">
      <div class="card-body">
        <h5 class="card-title text-info">Sensor Data (9DOF)</h5>
        <div id="sensor-data" class="mt-3">Loading...</div>
      </div>
    </div>
  </div>
</div>

<div class="row g-4 mt-1">
  <!-- Video Feed -->
  <div class="col-12">
    <div class="card bg-dark text-white border border-secondary">
      <div class="card-body">
        <h5 class="card-title text-info">Video Feed</h5>
        <img
          id="video-stream"
          class="img-fluid mt-3 border border-secondary rounded"
          alt="Live Video Stream"
        >
      </div>
    </div>
  </div>
</div>

<!-- Include JavaScript -->
<script src="/static/js/thrusters.js"></script>
<script src="/static/js/sensors.js"></script>
<script src="/static/js/lights.js"></script>
<script src="/static/js/battery.js"></script>
<script src="/static/js/depth.js"></script>
{% endblock %}
