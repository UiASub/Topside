{% extends "base.html" %}

{% block content %}
<div class="row g-4">
  <!-- Battery Card -->
  <div class="col-md-4">
    <div class="card custom-card h-100">
      <div class="card-body d-flex flex-column">
        <h5 class="card-title">Battery</h5>
        <div class="progress mb-2">
          <div id="battery-progress" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
        </div>
        <p id="battery-status" class="card-text mt-auto">Loading...</p>
      </div>
    </div>
  </div>

  <!-- Depth Card -->
  <div class="col-md-4">
    <div class="card custom-card h-100">
      <div class="card-body d-flex flex-column">
        <h5 class="card-title">Depth</h5>
        <p id="depth-status" class="display-6">Loading...</p>
        <small class="text-muted mt-auto">Target: <span id="depth-target">-</span></small>
      </div>
    </div>
  </div>

  <!-- Lights Card -->
  <div class="col-md-4">
    <div class="card custom-card h-100">
      <div class="card-body d-flex flex-column">
        <h5 class="card-title">Lights</h5>
        <div id="light-data" class="mt-3">Loading...</div>
      </div>
    </div>
  </div>
</div>

<div class="row g-4 mt-1">
  <!-- Thruster Status -->
  <div class="col-md-8">
    <div class="card custom-card h-100">
      <div class="card-body">
        <h5 class="card-title">Thruster Status</h5>
        <table id="thruster-status-table" class="table custom-table">
          <thead>
            <tr>
              <th>Thruster</th>
              <th>Power (W)</th>
              <th>Temperature (Â°C)</th>
            </tr>
          </thead>
          <tbody>
            <!-- Dynamically populated by JavaScript -->
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Sensor Data -->
  <div class="col-md-4">
    <div class="card custom-card h-100">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center">
          <h5 class="card-title mb-0">Sensor Data (9DOF)</h5>
          <button id="calibrate-btn" class="btn btn-sm btn-outline-primary">Calibrate</button>
        </div>
        <div id="sensor-data" class="mt-3">Loading...</div>
      </div>
    </div>
  </div>
</div>

<!-- Resource Monitor Bar -->
<div class="row g-4 mt-1">
  <div class="col-12">
    <div class="card custom-card">
      <div class="card-body py-2">
        <div class="resource-bar">
          <div class="resource-item">
            <span class="resource-label">CPU</span>
            <div class="resource-gauge">
              <div id="cpu-bar" class="resource-fill"></div>
            </div>
            <span id="cpu-value" class="resource-value">0%</span>
          </div>
          <div class="resource-item">
            <span class="resource-label">RAM</span>
            <div class="resource-gauge">
              <div id="ram-bar" class="resource-fill"></div>
            </div>
            <span id="ram-value" class="resource-value">0%</span>
          </div>
          <div class="resource-item">
            <span class="resource-label">Uptime</span>
            <span id="uptime-value" class="resource-value-text">--:--</span>
          </div>
          <div class="resource-item">
            <span class="resource-label">Threads</span>
            <span id="thread-value" class="resource-value-text">--</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row g-4 mt-1">
  <!-- Video Feed -->
  <div class="col-12">
    <div class="card custom-card h-100">
      <div class="card-body">
        <h5 class="card-title">Autonomus missions</h5>
          <div class="navigation">
            <button id="docking-button" type="button" class="btn btn-sm btn-primary">Docking</button>
              <button id="pipeline-button" type="button" class="btn btn-sm btn-primary">Pipeline</button>
          </div>
      </div>
    </div>
  </div>
</div>

{% include '_config_modal.html' %}


<script src="/static/js/thrusters.js"></script>
<script src="/static/js/sensors.js"></script>
<script src="/static/js/lights.js"></script>
<script src="/static/js/battery.js"></script>
<script src="/static/js/depth.js"></script>
<script src="/static/js/gauges.js"></script>
{% endblock %}
